/*! Copyright (c) 2013 Rory Gibson
 *  https://github.com/roryg */
jQuery(function(e){var t=window.History;var n=false;var r=false;var i=e("#ajax-container");var s=e("#latest-post");var o=e("#post-index");s.show();o.hide();if(window.location.pathname.indexOf("page")===1){s.hide();o.show()}if(!t.enabled){return false}t.Adapter.bind(window,"statechange",function(){var u=t.getState();e.get(u.url,function(t){var u=e(t);var a=e("#ajax-container",u).contents();e("html, body").animate({scrollTop:0});i.fadeOut(500,function(){s=a.filter("#latest-post");o=a.filter("#post-index");if(r===true){s.hide()}else{s.show();o.hide()}i.html(a);i.fadeIn(500);NProgress.done();n=false;r=false})})});e("body").on("click",".js-ajax-link, .pagination a",function(i){i.preventDefault();if(n===false){var u=t.getState();var a=e(this).attr("href");var f=e(this).attr("title")||null;if(a!==u.url.replace(/\/$/,"")){n=true;if(e(this).hasClass("js-show-index")||e(this).parent(".pagination").length>0){r=true}NProgress.start();t.pushState({},f,a)}else{if(e(this).hasClass("js-show-index")){e("html, body").animate({scrollTop:0});NProgress.start();s.fadeOut(300,function(){o.fadeIn(300);NProgress.done()})}else{e("html, body").animate({scrollTop:0});NProgress.start();o.fadeOut(300,function(){s.fadeIn(300);NProgress.done()})}}}})})